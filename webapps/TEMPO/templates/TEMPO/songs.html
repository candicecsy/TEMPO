{% extends 'TEMPO/band_base.html' %}
{% block title %}
    <title>Songs</title>
{% endblock %}
{% block band_css %}
    {% load static %}
    <link rel="stylesheet" href="{% static "TEMPO/css/band_live_session.css" %}">
{% endblock %}
{% block nav-item %}
    <li class="nav-item first-item">
        <a href="{% url 'my-band' %}">Band Profile</a>
    </li>
    <li class="nav-item">
        <a href="{% url 'live-session' %}"><span>Live Sessions</span></a>
    </li>
    <li class="nav-item">
        <a href="{% url 'practice-session' %}">Practice Sessions</a>
    </li>
    <li class="nav-item active-item">
        <a href="{% url 'song-list' %}">Song Lists</a>
    </li>
    <li class="nav-item">
        <a href="{% url 'band-calendar' %}">Calendar</a>
    </li>
{% endblock %}
{% block main %}
    <div id="event-songs" class="container">
        <div class="row">
            <div class="col-md-10 offset-md-2">
                <div class="title">
                    <h3>&nbspSongs &nbspof &nbsp&nbsp<span>{{ band_event.name }}</span></h3>
                </div>
                <button class="add-new-button" data-toggle="modal" data-target="#addNewSongModal"><i
                        class="fa fa-plus-square"
                        aria-hidden="true">&nbspAdd
                    new song</i></button>
                <div class="line"></div>

                {% if not songs %}
                    <h2>There hasn't been any song yet.</h2>
                {% else %}
                    <ul class="list-group song-list-group">
                        {% for song in songs %}
                            <li class="list-group-item">
                                <a href="#" onclick="preview_modal({{ song.id }})">{{ song.song_name }}</a>
                                <button onclick="location.href='{% url 'delete-song' song.id %}'"><i
                                        class="fa fa-window-close text" aria-hidden="true">&nbspDelete</i></button>
                                <button onclick="preview_modal({{ song.id }})"><i class="fa fa-eye"
                                                                     aria-hidden="true">&nbspPreview</i>
                                </button>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="addNewSongModal" tabindex="-1" role="dialog" aria-labelledby="addNewSongModal"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addNewSongModalLabel">Add a new song!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="reset_input()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12">
                                <form enctype="multipart/form-data" id="add-new-song-form"
                                      action="{% url 'add-new-song' band_event.id %}" method="post">
                                    {% csrf_token %}
                                    {% for error in form.non_field_errors %}
                                        <h4>{{ error }}</h4>
                                    {% endfor %}
                                    <table>
                                        {% for field in form.visible_fields %}
                                            <div class="fielderror">
                                                {{ field.errors }}
                                            </div>
                                            <tr>
                                                <td id="firstcol">
                                                    <div class="label">{{ field.label_tag }}</div>
                                                </td>
                                                <td id="secondcol">
                                                    <div class="field">
                                                        {{ field }}
                                                    </div>
                                                </td>
                                            </tr>
                                        {% endfor %}
                                    </table>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-info" id="save-btn"
                            onclick="add_new_song({{ band_event.id }})">Save
                    </button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="reset_input()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="SongPreviewModal" tabindex="-1" role="dialog" aria-labelledby="SongPreviewModal"
         aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content content">
            <div class="modal-header">
                <h5 class="modal-title" id="SongPreviewModalLabel">Preview</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <embed src="#" width="560" height="600"
                                           type='application/pdf'>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
{% endblock %}
{% block javascript %}
    {% load static %}
    <script src="{% static 'TEMPO/js/song_list.js' %}" type="text/javascript"></script>
{% endblock %}