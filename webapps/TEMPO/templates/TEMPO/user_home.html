{% extends 'TEMPO/base_index.html' %}
{% block title %}
    <title>Home</title>
{% endblock %}
{% block css %}
    {% load static %}
    <link rel="stylesheet" href="{% static "TEMPO/css/base.css" %}">
    <link rel="stylesheet" href="{% static "TEMPO/css/user_home.css" %}">
{% endblock %}
{% block nav-item-home %}
    <li class="nav-item active">
        <a class="nav-link" href="{% url 'home' %}"><span class="my-nav-active">Home</span><span class="sr-only">(current)</span></a>
    </li>
{% endblock %}
{% block nav-item-profile %}
    <li>
        <div class="dropdown">
            <a href="#" class="nav-link dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
               aria-expanded="false">
                <span>Profile</span>
            </a>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="{% url 'profile' %}">My Profile</a>
                {% if request.user.profile.band %}
                    <a class="dropdown-item" href="{% url 'my-band' %}">My Band</a>
                {% endif %}
            </div>
        </div>
    </li>
{% endblock %}
{% block nav-item-user-calendar %}
    <li class="nav-item">
        <a class="nav-link" href="{% url 'user-calendar' %}"><span class="my-nav-item">My Calendar</span><span
                class="sr-only">(current)</span></a>
    </li>
{% endblock %}
{% block body %}
    {% if not upcomings %}
        <div>
            <img class="my-carousel" src="{% static 'TEMPO/images/concert.jpg' %}">
        </div>
    {% else %}
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                {% if upcomings.1 %}
                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                {% endif %}
                {% if upcomings.2 %}
                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                {% endif %}
            </ol>
            <div class="carousel-inner" role="listbox">
                <div class="carousel-item active">
                    <img class="d-block w-100 my-carousel" src="{% url 'event-photo' upcomings.0.id %}"
                         alt="First slide">
                </div>
                {% if upcomings.1 %}
                    <div class="carousel-item">
                        <img class="d-block w-100 my-carousel" src="{% url 'event-photo' upcomings.1.id %}"
                             alt="Second slide">
                    </div>
                {% endif %}
                {% if upcomings.2 %}
                    <div class="carousel-item">
                        <img class="d-block w-100 my-carousel" src="{% url 'event-photo' upcomings.2.id %}"
                             alt="Third slide">
                    </div>
                {% endif %}
            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    {% endif %}
    <div class="index_box_outer">
        <div class="index_box">
            <div class="title">
                <h3>Upcoming Events</h3>
            </div>
            <div class="line"></div>
            <div class="content">
                {% if not upcomings %}
                    <p class="no-event-info">No upcoming event yet!</p>
                {% else %}
                    <ul class="video-list">
                        {% for upcoming in upcomings %}
                            <li class="video-1">
                                <div>
                                    <a class="video-title" href="{% url 'get-upcoming' upcoming.id %}">
                                        <img src="{% url 'event-photo' upcoming.id %}">
                                        <p class="video-title">{{ upcoming.name }}</p>
                                    </a>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>

        <div class="index_box">
            <div class="title">
                <h3>Live Session</h3>
            </div>
            <div class="line"></div>
            <div class="content">
                {% if not lives %}
                    <p class="no-event-info">No live session now!</p>
                {% else %}
                    <div>
                        <ul class="video-list">
                            {% for live in lives %}
                                <li class="video-1">
                                    <a href="{% url 'watch-event' live.id %}">
                                        <img src="{% url 'event-photo' live.id %}">
                                        <p class="video-title">{{ live.name }}</p>
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}